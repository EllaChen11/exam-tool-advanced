# -----------------------
# æ³¢åŠ¨åˆ†æï¼ˆæ ‡å‡†å·®ï¼‰å®Œå–„ç‰ˆ
# -----------------------
# å­¦ç”Ÿæˆç»©æ ‡å‡†å·®
score_std = stu["æ€»åˆ†"].std()

# æ¯æ¬¡è€ƒè¯•ç­çº§æ ‡å‡†å·®ï¼ˆåæ˜ ç­çº§æ³¢åŠ¨ï¼‰
class_std_df = df.groupby("æ—¥æœŸ")["æ€»åˆ†"].std().reset_index().rename(columns={"æ€»åˆ†": "ç­çº§æ ‡å‡†å·®"})

# åˆå¹¶åˆ°å­¦ç”Ÿæˆç»©è¡¨ä¸­
compare_df = compare_df.merge(class_std_df, on="æ—¥æœŸ")

st.subheader("ğŸ“ æˆç»©æ³¢åŠ¨åˆ†æ")
st.write(f"- è¯¥ç”Ÿå†æ¬¡æˆç»©æ ‡å‡†å·®ï¼ˆæ³¢åŠ¨å¹…åº¦ï¼‰ä¸º: **{score_std:.2f}**")
st.write("- æ¯æ¬¡è€ƒè¯•ç­çº§æˆç»©æ ‡å‡†å·®å¦‚ä¸‹è¡¨ï¼Œå­¦ç”Ÿæˆç»©æ³¢åŠ¨å¤§äºç­çº§æ ‡å‡†å·®å¯èƒ½è¡¨ç¤ºæ³¢åŠ¨å¹…åº¦è¾ƒå¤§ï¼š")
st.dataframe(compare_df[["æ—¥æœŸ", "æ€»åˆ†_å­¦ç”Ÿ", "ç­çº§æ ‡å‡†å·®"]])
